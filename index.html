<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jeu simple — Saisie pseudo</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f3f4f6;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
    .box{background:#fff;padding:20px;border-radius:12px;box-shadow:0 8px 24px rgba(15,23,42,.08);width:320px;text-align:center}
    input[type=text]{width:100%;padding:8px;border-radius:8px;border:1px solid #e6eefc;margin-top:8px}
    button{margin-top:12px;padding:10px 14px;border-radius:8px;border:none;background:#2563eb;color:#fff;cursor:pointer}
    .small{font-size:13px;color:#6b7280;margin-top:8px}
    #gameArea{margin-top:12px}
    #counter{font-size:40px;font-weight:800}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="box">
    <h2>Jeu simple</h2>
    <div id="startArea">
      <label for="pseudo">Entrez votre pseudo :</label>
      <input id="pseudo" type="text" placeholder="Votre pseudo" />
      <div class="small">But : cliquer le plus de fois possible en 5 secondes</div>
      <button id="startBtn">Démarrer</button>
    </div>

    <div id="gameArea" class="hidden">
      <div class="small">Joueur : <span id="playerName">—</span></div>
      <div id="counter">0</div>
      <button id="clickBtn">CLIQUEZ !</button>
      <div class="small">Temps restant : <span id="timeLeft">5</span>s</div>
    </div>

    <div id="endArea" class="hidden">
      <div class="small">Résultat pour <strong id="resName">—</strong></div>
      <div style="font-size:28px;font-weight:700" id="resScore">0</div>
      <div class="small">Meilleur score (pour ce pseudo) : <span id="best">0</span></div>
      <button id="playAgain">Rejouer</button>
    </div>
  </div>

  <script>
    const pseudoIn = document.getElementById('pseudo');
    const startBtn = document.getElementById('startBtn');
    const startArea = document.getElementById('startArea');
    const gameArea = document.getElementById('gameArea');
    const endArea = document.getElementById('endArea');
    const playerName = document.getElementById('playerName');
    const counterEl = document.getElementById('counter');
    const clickBtn = document.getElementById('clickBtn');
    const timeLeftEl = document.getElementById('timeLeft');
    const resName = document.getElementById('resName');
    const resScore = document.getElementById('resScore');
    const bestEl = document.getElementById('best');
    const playAgain = document.getElementById('playAgain');

    let count = 0; let timeLeft = 5; let timer = null; let playing = false; let pseudo = '';

    function loadBest(p){
      const b = Number(localStorage.getItem('best_'+p)) || 0;
      bestEl.textContent = b;
      return b;
    }

    startBtn.addEventListener('click', ()=>{
      const v = pseudoIn.value.trim();
      if(!v){ alert('Veuillez entrer un pseudo.'); pseudoIn.focus(); return; }
      pseudo = v;
      playerName.textContent = pseudo;
      startArea.classList.add('hidden');
      gameArea.classList.remove('hidden');
      count = 0; counterEl.textContent = count;
      timeLeft = 5; timeLeftEl.textContent = timeLeft;
      playing = true;
      loadBest(pseudo);

      // start countdown
      timer = setInterval(()=>{
        timeLeft -= 1;
        timeLeftEl.textContent = timeLeft;
        if(timeLeft<=0){ finish(); }
      },1000);
    });

    clickBtn.addEventListener('click', ()=>{ if(!playing) return; count++; counterEl.textContent = count; });

    function finish(){
      playing = false;
      clearInterval(timer);
      gameArea.classList.add('hidden');
      endArea.classList.remove('hidden');
      resName.textContent = pseudo;
      resScore.textContent = count;
      // save best
      const best = loadBest(pseudo);
      if(count>best){ localStorage.setItem('best_'+pseudo, count); bestEl.textContent = count; }
    }

    playAgain.addEventListener('click', ()=>{
      endArea.classList.add('hidden');
      startArea.classList.remove('hidden');
      pseudoIn.value = '';
      pseudoIn.focus();
    });

    // accessibility: enter to start
    pseudoIn.addEventListener('keyup', (e)=>{ if(e.key==='Enter') startBtn.click(); });
  </script>
</body>
</html>

